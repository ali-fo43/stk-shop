<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Employee • STAXLLC Photos</title>
  <link rel="icon" href="/assets/favicon.ico" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="nav">
    <div class="nav-inner">
      <div class="brand">
        <img src="/assets/logo-light.png" alt="STAXLLC logo" />
        <div>
          <div class="title">STAXLLC Employee</div>
          <div class="subtitle">Secure photo management</div>
        </div>
      </div>
      <div class="row">
        <a class="btn" href="/">Customer Page</a>
        <button class="btn danger" id="logoutBtn" type="button" style="display:none">Logout</button>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="hero">
      <h1>Employee Dashboard</h1>
      <p>Login to add photos, upload images, and manage the gallery.</p>
    </div>

    <div class="panel employee-panel" id="loginPanel">
      <div class="name">Login</div>
      <div class="muted">Authorized employees only.</div>
      <div class="hr"></div>

      <form id="loginForm" class="form">
        <div class="field">
          <label>Email</label>
          <input name="email" type="email" placeholder="admin@staxllc.com" required />
        </div>
        <div class="field">
          <label>Password</label>
          <input name="password" type="password" placeholder="••••••••" required />
        </div>
        <div class="row" style="grid-column:1/-1">
          <div class="small">Tip: change credentials in <b>server/.env</b></div>
          <button class="btn primary" type="submit">Login</button>
        </div>
      </form>
    </div>

    <div class="panel employee-panel" id="dashPanel" style="display:none">
      <div class="row">
        <div>
          <div class="name">Add Photo</div>
          <div class="muted">Upload an image and set the name.</div>
        </div>
        <span class="badge" id="authBadge">Authorized</span>
      </div>

      <div class="hr"></div>

      <form id="addForm" class="form" enctype="multipart/form-data">
        <div class="field">
          <label>Name</label>
          <input name="name" placeholder="Photo name" required />
        </div>
        <div class="field" style="grid-column:1/-1">
          <label>Image (PNG/JPG/WEBP, max 2MB)</label>
          <input name="image" type="file" accept="image/png,image/jpeg,image/webp" required />
        </div>
        <div class="row" style="grid-column:1/-1">
          <div class="small">Images are stored on the server.</div>
          <button class="btn primary" type="submit">Add Photo</button>
        </div>
      </form>

      <div class="hr"></div>

      <div class="row">
        <div>
          <div class="name">Current Photos</div>
          <div class="muted">Update name or delete.</div>
        </div>
      </div>

      <div class="hr"></div>
      <div id="photosGrid" class="grid"></div>
  </div>

  <div class="toast" id="toast">
    <div class="t" id="toastTitle"></div>
    <div class="d" id="toastDesc"></div>
  </div>
<!-- Edit Panel -->
<div class="modal" id="editModal" aria-hidden="true">
  <div class="modal-backdrop" id="editCloseBg"></div>

  <div class="modal-card">
    <div class="modal-head">
      <div>
        <div class="title">Edit Photo</div>
        <div class="subtitle">Update name or replace the image.</div>
      </div>
      <button class="btn danger" type="button" id="editCloseBtn">Close</button>
    </div>

    <div class="hr"></div>

    <form id="editForm" class="form" enctype="multipart/form-data">
      <input type="hidden" name="id" id="editId" />

      <div class="field">
        <label>Name</label>
        <input name="name" id="editName" required />
      </div>

      <div class="field" style="grid-column:1/-1">
        <label>Replace Image (optional)</label>
        <input name="image" id="editImage" type="file" accept="image/png,image/jpeg,image/webp" />
        <div class="small">Leave empty to keep the current image.</div>
      </div>

      <div class="row" style="grid-column:1/-1">
        <div class="small" id="editHint">Editing…</div>
        <button class="btn primary" type="submit" id="editSaveBtn">Save Changes</button>
      </div>
    </form>
  </div>
</div>

<!-- Image Modal -->
<div id="imageModal" class="modal">
  <div class="modal-backdrop" id="imageModalBackdrop"></div>
  <div class="modal-content image-modal-content">
    <div class="modal-header">
      <h3 id="imageModalTitle">Photo</h3>
      <button class="modal-close" id="imageModalClose">×</button>
    </div>
    <div class="modal-body">
      <img id="imageModalImg" src="" alt="Photo" />
    </div>
  </div>
</div>

  <script src="/employee.js"></script>
</body>
</html>
